<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Country Regulatory Status Map</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoianVuaW9yYW5hbHlzdDEiLCJhIjoiY2xranA5anhmMGlmazNobmVsMzkyY3ZmZyJ9.YvQ2M9_m6eVHWt5AHbaggg';
    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v12',
        center: [-88.137343, 35.137451],
        zoom: 3,
        maxZoom: 6
    });

    map.on('load', () => {
        const layers = map.getStyle().layers;
        let firstSymbolId;
        for (const layer of layers) {
            if (layer.type === 'symbol') {
                firstSymbolId = layer.id;
                break;
            }
        }

        // Add the green and yellow markers for countries with implemented regulation and taxonomy in development
        var greenCountries = [
          { name: 'Implemented', coordinates: [-74.2973, 4.5709] },
          { name: 'Implemented', coordinates: [103.8467, 46.8625] },
          { name: 'Implemented', coordinates: [116.4074, 39.9042] },
          { name: 'Implemented', coordinates: [138.2529, 36.2048] },
          { name: 'Implemented', coordinates: [101.9758, 4.2105] },
          { name: 'Implemented', coordinates: [14.5501, 47.5162] },
          { name: 'Implemented', coordinates: [4.4699, 50.5039] },
          { name: 'Implemented', coordinates: [25.4858, 42.7339] },
          { name: 'Implemented', coordinates: [15.2000, 45.1000] },
          { name: 'Implemented', coordinates: [33.4299, 35.1264] },
          { name: 'Implemented', coordinates: [15.4730, 49.8175] },
          { name: 'Implemented', coordinates: [9.5018, 56.2639] },
          { name: 'Implemented', coordinates: [24.7536, 58.5953] },
          { name: 'Implemented', coordinates: [25.7482, 61.9241] },
          { name: 'Implemented', coordinates: [2.2137, 46.6034] },
          { name: 'Implemented', coordinates: [10.4515, 51.1657] },
          { name: 'Implemented', coordinates: [21.8243, 39.0742] },
          { name: 'Implemented', coordinates: [19.0402, 47.4979] },
          { name: 'Implemented', coordinates: [-6.2603, 53.3498] },
          { name: 'Implemented', coordinates: [12.5674, 41.8719] },
          { name: 'Implemented', coordinates: [24.6032, 56.8796] },
          { name: 'Implemented', coordinates: [23.8813, 55.1694] },
          { name: 'Implemented', coordinates: [6.1296, 49.8153] },
          { name: 'Implemented', coordinates: [14.3754, 35.9375] },
          { name: 'Implemented', coordinates: [4.8979, 52.3779] },
          { name: 'Implemented', coordinates: [19.1451, 51.9194] },
          { name: 'Implemented', coordinates: [-9.1393, 38.7223] },
          { name: 'Implemented', coordinates: [24.9668, 45.9432] },
          { name: 'Implemented', coordinates: [19.6990, 48.6690] },
          { name: 'Implemented', coordinates: [14.9955, 46.1512] },
          { name: 'Implemented', coordinates: [-3.7492, 40.4637] },
          { name: 'Implemented', coordinates: [18.6435, 60.1282] }
        ];

        var yellowCountries = [
          { name: 'In Development', coordinates: [-106.3468, 56.1304] },
          { name: 'In Development', coordinates: [-102.5528, 23.6345] },
          { name: 'In Development', coordinates: [-70.1627, 18.7357] },
          { name: 'In Development', coordinates: [-75.0152, -9.1900] },
          { name: 'In Development', coordinates: [-47.8825, -15.7942] },
          { name: 'In Development', coordinates: [-71.5429, -35.6751] },
          { name: 'In Development', coordinates: [-3.4359, 55.3781] },
          { name: 'In Development', coordinates: [24.7495, -30.5595] },
          { name: 'In Development', coordinates: [78.9629, 20.5937] },
          { name: 'In Development', coordinates: [90.3563, 23.6850] },
          { name: 'In Development', coordinates: [80.7718, 7.8731] },
          { name: 'In Development', coordinates: [174.8859, -40.9006] },
          { name: 'In Development', coordinates: [105.3188, 61.5240] },
          { name: 'In Development', coordinates: [66.9237, 48.0196] },
          { name: 'In Development', coordinates: [100.9925, 15.8700] },
          { name: 'In Development', coordinates: [127.7669, 35.9078] },
          { name: 'In Development', coordinates: [108.2772, 14.0583] },
          { name: 'In Development', coordinates: [121.7740, 12.8797] },
          { name: 'In Development', coordinates: [103.8198, 1.3521] },
          { name: 'In Development', coordinates: [113.9213, -0.7893] }
          // Add more countries...
        ];

        // Add markers for green countries
        greenCountries.forEach(function(country) {
          var marker = new mapboxgl.Marker({ color: '#00FF00' })
            .setLngLat(country.coordinates)
            .setPopup(new mapboxgl.Popup().setHTML('<h3>' + country.name + '</h3>'))
            .addTo(map);
        });

        // Add markers for yellow countries
        yellowCountries.forEach(function(country) {
          var marker = new mapboxgl.Marker({ color: '#FFFF00' })
            .setLngLat(country.coordinates)
            .setPopup(new mapboxgl.Popup().setHTML('<h3>' + country.name + '</h3>'))
            .addTo(map);
        });

        // Continue with the rest of the code for the urban areas layer
        map.addSource('urban-areas', {
            'type': 'geojson',
            'data': 'https://docs.mapbox.com/mapbox-gl-js/assets/ne_50m_urban_areas.geojson'
        });
        map.addLayer(
            {
                'id': 'urban-areas-fill',
                'type': 'fill',
                'source': 'urban-areas',
                'layout': {},
                'paint': {
                    'fill-color': '#f08',
                    'fill-opacity': 0.4
                }
            },
            firstSymbolId
        );
    });
  </script>
</body>
</html>
